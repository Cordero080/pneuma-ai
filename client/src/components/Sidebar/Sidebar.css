/* ============================================
   SIDEBAR — Spaceship Control Panel
   Cockpit aesthetic • Tech borders • Status lights
   LIVING COLORS — subtle hue drift over time
   
   COLOR PALETTE (Tetradic harmony):
   - Cyan:    #00d4ff (primary)
   - Emerald: #00ffaa (status/online)
   - Violet:  #a855f7 (accents)
   - Amber:   #ffaa00 (warnings/highlights)
   - Rose:    #ff6b9d (active states)
   ============================================ */

/* LIVING COLOR ANIMATIONS — slow, subliminal hue drifts */
@keyframes hueDriftEmerald {
  0%, 100% {
    filter: hue-rotate(0deg);
  }
  33% {
    filter: hue-rotate(-15deg); /* towards cyan */
  }
  66% {
    filter: hue-rotate(10deg); /* towards yellow-green */
  }
}

@keyframes hueDriftAmber {
  0%, 100% {
    filter: hue-rotate(0deg);
  }
  50% {
    filter: hue-rotate(-20deg); /* towards orange-red */
  }
}

@keyframes hueDriftViolet {
  0%, 100% {
    filter: hue-rotate(0deg);
  }
  33% {
    filter: hue-rotate(15deg); /* towards magenta */
  }
  66% {
    filter: hue-rotate(-10deg); /* towards blue */
  }
}

@keyframes hueDriftRose {
  0%, 100% {
    filter: hue-rotate(0deg);
  }
  50% {
    filter: hue-rotate(25deg); /* towards coral/orange */
  }
}

/* Panel scan line animation */
@keyframes panelScan {
  0% {
    transform: translateY(-100%);
  }
  100% {
    transform: translateY(100vh);
  }
}

@keyframes statusPulse {
  0%, 100% {
    opacity: 0.4;
    box-shadow: 0 0 4px currentColor;
  }
  50% {
    opacity: 1;
    box-shadow: 0 0 8px currentColor, 0 0 12px currentColor;
  }
}

@keyframes statusPulseAmber {
  0%, 100% {
    opacity: 0.5;
    box-shadow: 0 0 4px #ffaa00;
  }
  50% {
    opacity: 1;
    box-shadow: 0 0 8px #ffaa00, 0 0 12px #ffaa00;
  }
}

@keyframes statusPulseViolet {
  0%, 100% {
    opacity: 0.5;
    box-shadow: 0 0 4px #a855f7;
  }
  50% {
    opacity: 1;
    box-shadow: 0 0 8px #a855f7, 0 0 12px #a855f7;
  }
}

@keyframes dataStream {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 0 20px;
  }
}

.sidebar {
  position: fixed;
  left: 0;
  top: 0;
  height: 100vh;
  width: 220px;
  
  /* Match chatbox background */
  background: 
    linear-gradient(145deg, rgba(8, 8, 16, 0.99), rgba(4, 4, 10, 1)),
    radial-gradient(circle at 30% 30%, rgba(138, 43, 226, 0.08), transparent 50%),
    radial-gradient(circle at 70% 70%, rgba(0, 212, 255, 0.05), transparent 50%);
  
  /* Tech border - right edge glow */
  border-right: 1px solid rgba(41, 44, 233, 0.276);
  box-shadow: 
    inset -1px 0 0 rgba(0, 212, 255, 0.1),
    2px 0 20px rgba(0, 0, 0, 0.5),
    inset 0 0 60px rgba(0, 20, 40, 0.3);
  
  display: flex;
  flex-direction: column;
  padding: 0;
  padding-top: 0; /* Ensure no top padding issues */
  z-index: 100;
  
  transition: width 0.3s ease, opacity 0.3s ease;
  overflow: hidden;
  overflow-y: auto; /* Allow vertical scroll if content overflows */
  overscroll-behavior: contain; /* Prevent scroll chaining */
}

/* Removed scan lines - cleaner look */
.sidebar::before {
  display: none;
}

/* Removed scan beam - cleaner look */
.sidebar::after {
  display: none;
}

.sidebar.collapsed {
  width: 0;
  padding: 0;
  overflow: hidden;
}

/* Toggle button - right side vertical bar */
.sidebar-toggle {
  position: fixed;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  
  width: 10px;
  height: 50px;
  
  background: transparent;
  border: 1px solid rgba(168, 85, 247, 0.3);
  border-radius: 3px;
  box-shadow: 0 0 6px rgba(168, 85, 247, 0.2);
  
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 101;
}

.sidebar-toggle.collapsed {
  right: 12px;
}

.sidebar-toggle:hover {
  border-color: rgba(168, 85, 247, 0.8);
  box-shadow: 0 0 12px rgba(168, 85, 247, 0.5);
  width: 12px;
}

.toggle-icon {
  display: none;
}

/* ============================================
   PANEL HEADER - Status Section
   ============================================ */
.panel-header {
  padding: 20px 16px 16px;
  border-bottom: 1px solid rgba(168, 85, 247, 0.15);
  position: relative;
  flex-shrink: 0; /* Prevent header from shrinking */
  min-height: fit-content; /* Ensure content is always visible */
  box-sizing: border-box;
  width: 100%;
  overflow: visible;
}

/* Status indicator row - single node with Pneuma text */
.status-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-bottom: 12px;
  position: relative;
  top: 0; /* Ensure it stays at top */
}

/* Single status light - cyan with gentle pulse */
.status-light {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #00d4ff;
  animation: statusPulse 2.5s ease-in-out infinite;
  box-shadow: 0 0 8px rgba(0, 212, 255, 0.5);
  flex-shrink: 0;
}

.status-text {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 3px;
  color: rgba(0, 255, 229, 0.913);
  text-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
  white-space: nowrap;
}

/* New chat button - Magenta family: warm border, cool text */
.new-chat-btn {
  width: 100%;
  padding: 10px 12px;
  margin-top: 8px;
  
  background: rgba(200, 80, 180, 0.06);
  /* Warmer magenta border (more red) */
  border: 1px solid rgba(255, 100, 150, 0.3);
  border-radius: 4px;
  
  /* Cooler magenta text (more blue) */
  color: rgba(220, 130, 255, 0.85);
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  
  cursor: pointer;
  transition: all 0.2s ease;
  
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  
  /* Living color - subtle drift */
  animation: hueDriftRose 55s ease-in-out infinite;
}

.new-chat-btn:hover {
  background: rgba(200, 80, 180, 0.15);
  border-color: rgba(255, 120, 170, 0.5);
  box-shadow: 
    0 0 15px rgba(220, 100, 180, 0.25),
    inset 0 0 15px rgba(220, 100, 180, 0.05);
  color: #d88fff;
}

.new-chat-btn:active {
  transform: scale(0.98);
  background: rgba(200, 80, 180, 0.25);
}

.plus-icon {
  width: 14px;
  height: 14px;
}

/* ============================================
   CONVERSATION LIST - Data Stream Section
   ============================================ */
.conversation-list {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  position: relative;
}

/* Architecture Sidebar Content */
.architecture-sidebar-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px 8px;
}

.list-header {
  padding: 0 0 12px;
  font-size: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 3px;
  /* Amber family - cooler/greener for text */
  color: rgba(220, 190, 80, 0.6);
  font-family: 'JetBrains Mono', monospace;
  
  display: flex;
  align-items: center;
  gap: 8px;
}

.list-header::before {
  content: '//';
  /* Amber family - warmer/oranger */
  color: rgba(255, 150, 50, 0.5);
}

.list-header::after {
  content: '';
  flex: 1;
  height: 1px;
  /* Gradient from warm to cool amber */
  background: linear-gradient(90deg, rgba(255, 150, 50, 0.35), transparent);
}

.empty-state {
  padding: 30px 0;
  color: rgba(255, 255, 255, 0.2);
  font-size: 0.65rem;
  text-align: center;
  font-style: italic;
}

/* Conversation item - Clean minimal style with dividers */
.conversation-item {
  width: 100%;
  padding: 12px 12px;
  
  /* No background - clean look */
  background: transparent;
  border: none;
  /* Bottom divider only */
  border-bottom: 1px solid rgba(100, 80, 150, 0.15);
  border-radius: 0;
  
  /* Cooler violet text (more blue) */
  color: rgba(180, 170, 220, 0.55);
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.65rem;
  text-align: left;
  
  display: flex;
  flex-direction: column;
  gap: 4px;
  cursor: pointer;
  
  transition: all 0.2s ease;
  position: relative;
}

.conversation-item::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background: transparent;
  transition: background 0.2s ease;
}

.conversation-item:hover {
  background: transparent;
  border-bottom-color: rgba(200, 100, 240, 0.3);
  color: rgba(200, 190, 255, 0.483);
}

.conversation-item:hover .conv-title {
  transform: scale(1.02);
  text-shadow: 0 0 8px rgba(108, 7, 215, 0.4);
}

.conversation-item:hover::before {
  /* Warm pink-violet on hover */
  background: rgba(220, 120, 255, 0.6);
}

.conversation-item.active {
  background: rgba(0, 40, 60, 0.5);
  /* Warmer cyan border (more green) */
  border-color: rgba(0, 230, 200, 0.3);
  border-left-color: #00e6c8;
  /* Cooler cyan text (more blue) */
  color: #60d0ff;
}

.conversation-item.active::before {
  /* Warm teal glow */
  background: #00e6c8;
  box-shadow: 0 0 8px rgba(0, 230, 200, 0.6);
}

.conv-icon {
  display: none; /* Hide emoji, use border indicator instead */
}

.conv-title {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 0.7rem;
  transition: all 0.2s ease;
  transform-origin: left center;
}

.conv-date {
  font-size: 0.5rem;
  /* Cooler amber (more golden/green) */
  color: rgba(200, 180, 100, 0.5);
  letter-spacing: 1px;
}

/* ============================================
   MULTI-SELECT STATES
   ============================================ */
.conversation-item.selected {
  background: rgba(168, 85, 247, 0.15);
  border-color: rgba(168, 85, 247, 0.4);
  border-left-color: rgba(168, 85, 247, 0.6);
  color: rgba(200, 180, 255, 0.9);
}

.conversation-item.selected .conv-date {
  color: rgba(168, 85, 247, 0.7);
}

.selection-count {
  font-size: 0.45rem;
  color: rgba(168, 85, 247, 0.8);
  margin-left: auto;
}

/* ============================================
   DELETE CONFIRMATION MODAL
   ============================================ */
.delete-confirm-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(3, 3, 8, 0.85);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  animation: fadeIn 0.15s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.delete-confirm-modal {
  background: rgba(20, 15, 30, 0.95);
  border: 1px solid rgba(255, 100, 100, 0.3);
  border-radius: 6px;
  padding: 20px;
  text-align: center;
  box-shadow: 
    0 0 30px rgba(255, 100, 100, 0.1),
    inset 0 0 20px rgba(255, 100, 100, 0.03);
  animation: modalSlide 0.15s ease-out;
}

@keyframes modalSlide {
  from { 
    opacity: 0;
    transform: scale(0.95);
  }
  to { 
    opacity: 1;
    transform: scale(1);
  }
}

.delete-confirm-icon {
  font-size: 1.5rem;
  color: rgba(255, 150, 100, 0.9);
  margin-bottom: 10px;
  text-shadow: 0 0 10px rgba(255, 150, 100, 0.4);
}

.delete-confirm-text {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.7rem;
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 16px;
  letter-spacing: 0.5px;
}

.delete-confirm-buttons {
  display: flex;
  gap: 10px;
  justify-content: center;
}

.delete-btn {
  padding: 8px 16px;
  border-radius: 4px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.6rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.delete-btn.cancel {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.6);
}

.delete-btn.cancel:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.3);
  color: rgba(255, 255, 255, 0.8);
}

.delete-btn.confirm {
  background: rgba(255, 80, 80, 0.15);
  border: 1px solid rgba(255, 80, 80, 0.4);
  color: rgba(255, 150, 150, 0.9);
}

.delete-btn.confirm:hover {
  background: rgba(255, 80, 80, 0.25);
  border-color: rgba(255, 80, 80, 0.6);
  color: #ff9999;
  box-shadow: 0 0 15px rgba(255, 80, 80, 0.2);
}

/* ============================================
   PANEL FOOTER - System Info
   ============================================ */
.panel-footer {
  padding: 12px 16px;
  /* Warmer violet border */
  border-top: 1px solid rgba(200, 100, 240, 0.15);
  
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.5rem;
  /* Cooler violet text */
  color: rgba(150, 140, 200, 0.5);
  text-transform: uppercase;
  letter-spacing: 1px;
  
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* Architecture Button */
.architecture-btn {
  background: transparent;
  border: 1px solid rgba(0, 212, 255, 0.25);
  color: rgba(0, 212, 255, 0.6);
  padding: 4px 8px;
  border-radius: 4px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.55rem;
  cursor: pointer;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.architecture-btn:hover {
  background: rgba(0, 212, 255, 0.1);
  border-color: rgba(0, 212, 255, 0.5);
  color: rgba(0, 212, 255, 0.9);
  box-shadow: 0 0 10px rgba(0, 212, 255, 0.2);
}

.system-version {
  opacity: 0.7;
  /* Cooler cyan (more blue) */
  color: rgba(100, 180, 255, 0.5);
}

.system-status {
  display: flex;
  align-items: center;
  gap: 6px;
}

.status-dot {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: #00ffaa;
  animation: 
    statusPulse 3s ease-in-out infinite,
    hueDriftEmerald 40s ease-in-out infinite;
}

/* ============================================
   RESPONSIVE - Tablet
   ============================================ */
@media (max-width: 768px) {
  .sidebar {
    width: 220px;
  }
  
  .sidebar-toggle {
    left: 6px;
    right: auto;
    top: 10px;
    transform: none;
    width: 6px;
    height: 30px;
  }
  
  .sidebar-toggle.collapsed {
    left: 6px;
    right: auto;
  }
  
  .sidebar-toggle:hover {
    width: 8px;
  }
}

/* ============================================
   RESPONSIVE - Phone
   ============================================ */
@media (max-width: 414px) {
  .sidebar {
    position: fixed;
    top: 0;
    right: 0;
    height: 100%;
    width: 180px;
    z-index: 200;
  }
  
  .sidebar.collapsed {
    width: 0;
  }
  
  .sidebar-toggle {
    left: 4px;
    right: auto;
    top: 6px;
    transform: none;
    width: 4px;
    height: 20px;
    z-index: 201;
  }
  
  .sidebar-toggle.collapsed {
    left: 4px;
    right: auto;
  }
  
  .sidebar-toggle:hover {
    width: 5px;
  }
  
  .panel-header {
    padding: 14px 12px 12px;
  }
  
  .new-chat-btn {
    padding: 10px 16px;
    font-size: 0.65rem;
  }
  
  .conversation-item {
    padding: 10px 12px;
    font-size: 0.7rem;
  }
  
  .panel-footer {
    padding: 10px 12px;
    font-size: 0.45rem;
  }
}
